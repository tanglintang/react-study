{"version":3,"sources":["src\\react\\create-element.js","src\\react-dom\\dom.js","src\\react-dom\\render.js","src\\react\\component.js","src\\react\\index.js","src\\react-dom\\index.js","src\\index.js"],"names":["createElement","tag","attrs","children","key","setAttribute","dom","name","value","test","toLowerCase","style","cssText","removeAttribute","renderComponent","render","_render","vnode","undefined","String","console","log","textNode","document","createTextNode","component","createComponent","setComponentProps","base","Object","keys","forEach","child","props","inst","prototype","Component","constructor","renderer","parentNode","replaceChild","container","appendChild","isReactComponent","state","stateChange","assign","Counter","num","setState","onClick","React","ReactDOM","fontSize","fontWeight","color","getElementById"],"mappings":"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","file":"src.9647d282.map","sourceRoot":"..","sourcesContent":["function createElement (tag, attrs, ...children) {\n  // console.log(tag, attrs, children)\n  attrs = attrs || {}\n  return {\n    tag,\n    attrs,\n    children,\n    key: attrs.key || null\n  }\n}\n\nexport default createElement\n","export function setAttribute(dom, name, value) {\r\n  // class\r\n  if (name === 'className') name = 'class'\r\n\r\n  // 事件\r\n  if (/on\\w+/.test(name)) {\r\n    name = name.toLowerCase()\r\n    dom[name] = value || ''\r\n  } else if (name === 'style') {\r\n    // 样式\r\n    if (!value || typeof value === 'string') {\r\n      dom.style.cssText = value\r\n    } else if (value && typeof value === 'object') {\r\n      for (let name in value) {\r\n        dom.style[name] = typeof value[name] === 'number' ? value[name] + 'px' : value[name]\r\n      }\r\n    }\r\n  } else {\r\n    if (name in dom) {\r\n      dom[name] = value || ''\r\n    }\r\n\r\n    if (value) {\r\n      dom.setAttribute(name, value)      \r\n    } else {\r\n      dom.removeAttribute(name, value)\r\n    }\r\n  }\r\n}","/**\n * @param {vnode 虚拟 DOM} \n * @return { 返回真实 DOM }\n */\nimport { setAttribute } from './dom.js'\nimport Component from '../react/component.js';\n\nfunction _render (vnode) {\n  // 1. 递归 将节点 转为 DOM， 子节点递归  出口是文本节点\n\n  // 2. 节点类型 三种：\n      // 文本节点 createTextNode()\n      // 标签节点 createElement() 设置 attributes、children =》递归 _render()\n      // component 内部实现 render() 方法 、 返回一段 jsx 需要实例化这个组件 获取 jsx和虚拟DOM 然后 render() 递归\n\n  // 换行。。\n  if (vnode === undefined || vnode === null || typeof vnode ==='boolean') {\n    vnode = ''\n  }\n\n  if (typeof vnode === 'number') {\n    vnode = String(vnode)\n    console.log(vnode)\n  }\n\n  // 文本节点\n  if (typeof vnode === 'string') {\n    // console.log(vnode)\n    let textNode = document.createTextNode(vnode)\n    console.log(textNode)\n    return textNode\n  }\n\n  // 组件 不是正常标签 vnode.tag = function Counter() {}\n  if (typeof vnode.tag === 'function') {\n    // console.log(vnode)\n    // return document.createTextNode('component')\n    const component = createComponent(vnode.tag, vnode.attrs)\n    setComponentProps(component, vnode.attrs)\n    return component.base\n  }\n\n  // 标签\n  const dom = document.createElement(vnode.tag)\n  // console.log(dom)\n  if (vnode.attrs) {\n    Object.keys(vnode.attrs).forEach(key => {\n      const value = vnode.attrs[key]\n      setAttribute(dom, key, value)\n    })\n  }\n\n  // 递归子节点\n  if (vnode.children) {\n    vnode.children.forEach(child => render(child, dom))\n  }\n\n  return dom\n\n}\n\nfunction createComponent(component, props) {\n  // console.log(component) // transfrom 预编译出来的 function Counter()\n  let inst\n  if (component.prototype && component.prototype.render) {\n    inst = new component(props)\n  } else {\n    inst = new Component(props)\n    inst.constructor = component\n    inst.render = function () {\n      return this.constructor(props)\n    }\n  }\n  // console.log(inst)  // js 对象形式\n  return inst\n}\n\nfunction setComponentProps (component, props) {\n  component.props = props\n  renderComponent(component)\n}\n\nexport function renderComponent (component) {\n  // 将 component 里的 jsx 转为 DOM，还会在 setState 时调用\n  let base  // jsx 对应的 DOM\n  const renderer = component.render()  // component 的 jsx\n  base = _render(renderer)\n  // 非 第一次渲染\n  if (component.base && component.base.parentNode) {\n    // 旧节点 的父节点 替换掉\n    component.base.parentNode.replaceChild(base, component.base)\n  }\n  component.base = base\n}\n\nexport function render(vnode, container) {\n  // console.log(vnode, container)\n  return container.appendChild(_render(vnode))\n}\n","import { renderComponent } from \"../react-dom/render\";\r\n\r\nclass Component {\r\n  constructor(props = {}) {\r\n    this.isReactComponent = true\r\n    this.state = {}\r\n    this.props = props\r\n  }\r\n\r\n  setState(stateChange) {\r\n    // console.log(stateChange)\r\n    Object.assign(this.state, stateChange)\r\n    // 重新渲染\r\n    console.log(this)\r\n    renderComponent(this)\r\n  }\r\n}\r\n\r\nexport default Component","import createElement from './create-element.js'\nimport Component from './component.js'\n\nexport default {\n  createElement,\n  Component\n}\n","import { render } from './render'\r\n\r\nexport default {\r\n    render\r\n}\r\n","import React from './react'\nimport ReactDOM from './react-dom'\n\nclass Counter extends React.Component {\n  constructor (props) {\n    super(props)\n    this.state = {\n      num: 1\n    }\n  }\n  onClick() {\n    this.setState({\n      num: ++this.state.num\n    })\n  }\n  render() {\n    return (\n      <div>\n        <h1>count: { this.state.num }</h1>\n        <button onClick={ () => { this.onClick() } }>add</button>\n      </div>\n    )\n  }\n}\n\nReactDOM.render(\n  <div onClick={() => {console.log('123')}}>Hello\n    <span className=\"root\" style={{fontSize: 20, fontWeight: 'bold', color: 'red' }}> World !</span>\n    <Counter />\n  </div>,\n  document.getElementById('root')\n)\n"]}